import{S as de,i as he,s as pe,k as w,a as A,w as ie,q as G,l as b,m as C,c as S,x as ue,r as J,h as y,n as p,p as me,b as j,H as c,O as V,y as ce,M as K,P as _e,f as H,t as F,d as ge,z as fe,K as we,N as be,B as Y,g as ye,R as ee,J as Ne}from"../../../../../chunks/index-9e047c9c.js";import{A as ve}from"../../../../../chunks/alert-8c945642.js";import{Q as te,T as le,o as z,K as se,A as ae}from"../../../../../chunks/index.esm2017-25db0622.js";import{r as Te,g as ke,u as Ie,a as Ee}from"../../../../../chunks/index.esm2017-4d311801.js";import{T as Pe}from"../../../../../chunks/Tiptap-89c3abd4.js";function ne(n,t,e){const l=n.slice();return l[5]=t[e],l[17]=e,l}function Ce(n){let t,e;return{c(){t=w("p"),e=G("No Image selected,the news post will not have an image."),this.h()},l(l){t=b(l,"P",{class:!0});var r=C(t);e=J(r,"No Image selected,the news post will not have an image."),r.forEach(y),this.h()},h(){p(t,"class","my-10")},m(l,r){j(l,t,r),c(t,e)},p:Y,d(l){l&&y(t)}}}function Oe(n){let t,e;return{c(){t=w("img"),this.h()},l(l){t=b(l,"IMG",{src:!0,alt:!0,width:!0}),this.h()},h(){Ne(t.src,e="")||p(t,"src",e),p(t,"alt","Preview"),p(t,"width","250")},m(l,r){j(l,t,r),n[11](t)},p:Y,d(l){l&&y(t),n[11](null)}}}function oe(n){let t,e=n[5]+"",l;return{c(){t=w("option"),l=G(e),this.h()},l(r){t=b(r,"OPTION",{});var T=C(t);l=J(T,e),T.forEach(y),this.h()},h(){t.__value=n[17]+1,t.value=t.__value},m(r,T){j(r,t,T),c(t,l)},p:Y,d(r){r&&y(t)}}}function re(n){let t,e;return t=new ve({props:{msg:"Please fill out all the fields for the news post to be valid."}}),{c(){ie(t.$$.fragment)},l(l){ue(t.$$.fragment,l)},m(l,r){ce(t,l,r),e=!0},i(l){e||(H(t.$$.fragment,l),e=!0)},o(l){F(t.$$.fragment,l),e=!1},d(l){fe(t,l)}}}function Ae(n){let t,e,l,r,T,f,k,_,P,i,d,R,m,N,B,M,U,I,o,E,q,D;function Z(s,g){return s[4]?Oe:Ce}let Q=Z(n),v=Q(n);_=new Pe({props:{content:""}});let L=n[6],h=[];for(let s=0;s<L.length;s+=1)h[s]=oe(ne(n,L,s));let u=n[0]&&re();return{c(){t=w("main"),e=w("div"),v.c(),l=A(),r=w("input"),T=A(),f=w("input"),k=A(),ie(_.$$.fragment),P=A(),i=w("div"),d=w("input"),R=A(),m=w("select"),N=w("option"),B=G("No Category");for(let s=0;s<h.length;s+=1)h[s].c();M=A(),u&&u.c(),U=A(),I=w("button"),o=G("Create News Post"),this.h()},l(s){t=b(s,"MAIN",{});var g=C(t);e=b(g,"DIV",{class:!0});var a=C(e);v.l(a),l=S(a),r=b(a,"INPUT",{type:!0}),T=S(a),f=b(a,"INPUT",{placeholder:!0,class:!0}),k=S(a),ue(_.$$.fragment,a),P=S(a),i=b(a,"DIV",{class:!0});var O=C(i);d=b(O,"INPUT",{placeholder:!0,class:!0}),R=S(O),m=b(O,"SELECT",{class:!0,"aria-label":!0,style:!0});var W=C(m);N=b(W,"OPTION",{});var x=C(N);B=J(x,"No Category"),x.forEach(y);for(let X=0;X<h.length;X+=1)h[X].l(W);W.forEach(y),O.forEach(y),M=S(a),u&&u.l(a),U=S(a),I=b(a,"BUTTON",{class:!0});var $=C(I);o=J($,"Create News Post"),$.forEach(y),a.forEach(y),g.forEach(y),this.h()},h(){p(r,"type","file"),p(f,"placeholder","News Title"),p(f,"class","w-full border border-gray-500 rounded-md py-3 px-2 my-4"),p(d,"placeholder","New News Category"),p(d,"class","w-1/2 border border-gray-500 rounded-md py-3 px-2 my-4 mr-3"),N.selected=!0,N.__value="No Category",N.value=N.__value,p(m,"class","form-select w-1/2 py-3 my-auto ml-3"),p(m,"aria-label","Default select example"),me(m,"height","fit-content"),p(i,"class","flex"),p(I,"class","btn !bg-slate-600 text-white mt-4 float-right border-0"),p(e,"class","w-5/6 mx-auto my-20")},m(s,g){j(s,t,g),c(t,e),v.m(e,null),c(e,l),c(e,r),n[12](r),c(e,T),c(e,f),V(f,n[1]),c(e,k),ce(_,e,null),c(e,P),c(e,i),c(i,d),V(d,n[5]),c(i,R),c(i,m),c(m,N),c(N,B);for(let a=0;a<h.length;a+=1)h[a].m(m,null);c(e,M),u&&u.m(e,null),c(e,U),c(e,I),c(I,o),E=!0,q||(D=[K(r,"change",n[8]),K(f,"input",n[13]),K(d,"input",n[14]),K(m,"change",n[7]),K(I,"click",_e(n[9]))],q=!0)},p(s,[g]){if(Q===(Q=Z(s))&&v?v.p(s,g):(v.d(1),v=Q(s),v&&(v.c(),v.m(e,l))),g&2&&f.value!==s[1]&&V(f,s[1]),g&32&&d.value!==s[5]&&V(d,s[5]),g&64){L=s[6];let a;for(a=0;a<L.length;a+=1){const O=ne(s,L,a);h[a]?h[a].p(O,g):(h[a]=oe(O),h[a].c(),h[a].m(m,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=L.length}s[0]?u?g&1&&H(u,1):(u=re(),u.c(),H(u,1),u.m(e,U)):u&&(ye(),F(u,1,1,()=>{u=null}),ge())},i(s){E||(H(_.$$.fragment,s),H(u),E=!0)},o(s){F(_.$$.fragment,s),F(u),E=!1},d(s){s&&y(t),v.d(),n[12](null),fe(_),we(h,s),u&&u.d(),q=!1,be(D)}}}function Se(n,t,e){let{data:l}=t,r=!1;const{categories:T}=l;let f="",k,_,P=!1,i=null,d;function R(o){o.target.selectedOptions[0].text==="No category"?e(5,i=null):e(5,i=o.target.selectedOptions[0].text)}function m(){const o=k.files[0];if(o){e(4,P=!0);const E=new FileReader;E.addEventListener("load",function(){_.setAttribute("src",E.result)}),E.readAsDataURL(o);return}e(4,P=!1)}const N=()=>{if(d=document.getElementsByClassName("editor")[0].children[0].innerHTML,f==null||f===""||d===null||d===void 0||d===""||i===null||i===void 0||i==="")e(0,r=!0);else if(e(0,r=!1),!P)te(le(z(),"News"),{title:f,description:d,category:i}).then(o=>{se(ae(z(),"News",o.id),{id:o.id}).then(()=>{alert("Successfully uploaded news post."),location.reload()})}).catch(o=>console.log(o));else{const o=Te(ke(),"newsIcons/"+k.files[0].name);Ie(o,k.files[0]).then(E=>{console.log("Uploaded a blob or file!"),Ee(o).then(q=>{te(le(z(),"News"),{image:q,title:f,description:d,category:i}).then(D=>{se(ae(z(),"News",D.id),{id:D.id}).then(()=>{alert("Successfully uploaded news post."),location.reload()})})})})}};function B(o){ee[o?"unshift":"push"](()=>{_=o,e(3,_)})}function M(o){ee[o?"unshift":"push"](()=>{k=o,e(2,k)})}function U(){f=this.value,e(1,f)}function I(){i=this.value,e(5,i)}return n.$$set=o=>{"data"in o&&e(10,l=o.data)},[r,f,k,_,P,i,T,R,m,N,l,B,M,U,I]}class qe extends de{constructor(t){super(),he(this,t,Se,Ae,pe,{data:10})}}export{qe as default};
